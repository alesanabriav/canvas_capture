<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>sanabriav - Cam</title>
</head>
<body>
  <video id="videoElement"></video>
  <button id="capture">Capture</button>
  <canvas id="canvas"></canvas>
  <input type="range" id="myRange" value="0">
<script>

  var video = document.querySelector("#videoElement");
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext('2d');

navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
 
if (navigator.getUserMedia) {      
    navigator.getUserMedia({video: true}, handleVideo, videoError);
}
 
function handleVideo(stream) {
    video.src = window.URL.createObjectURL(stream);
  video.play();
}
 
function videoError(e) {
    console.log(e);
}


document.getElementById('capture').addEventListener('click', function(e) {
  getCapture();
});

function getColor(range) {
  ctx.globalCompositeOperation = "overlay";
  range = range ? range : 0;
  var grd = ctx.createRadialGradient(range, range, canvas.width, range, 0, 0);
  grd.addColorStop(0,"blue");
  grd.addColorStop(1,"#FF4F59");

  ctx.fillStyle= grd;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

  document.getElementById('myRange').addEventListener('change', function() {

    getCapture(this.value);
  });

function getCapture(range) {

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  ctx.drawImage(video, 0, 0);
  getColor(range);
}

</script>
</body>
</html>
